{% extends 'base.html' %}

{% block head %}
<title>Home</title>
<style>
    body {
            background-image: url("https://wallpaperaccess.com/full/713555.jpg");
            background-repeat: no-repeat;
            background-size: 1700px 1000px;
        }
    #loading {
        display: none;
    }
</style>
<script>
    function loadingFunction() {
        document.getElementById('loading').style.display = 'block';
    }
    function doneFunction() {
        document.getElementById('loading').style.display = 'none';
    }   
</script>
{% endblock %}

{% block body %}

<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary">
    <a class="navbar-brand" href="">TweetTragedy 2021</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/about">About</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/tools">Tools</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="" id="navbarDropdown" role="button" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    Contact
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" target="_blank" href="https://github.com/Markusovich">My GitHub</a>
                    <a class="dropdown-item" target="_blank" href="https://simon-website.herokuapp.com/">My Website</a>
                </div>
            </li>
        </ul>
        <form class="form-inline my-6 my-lg-0" action='/' method='POST'>
            <select class="form-control mr-sm-2" type="date" name="daterange" value="{{ request.form.daterange }}">
                <option class="dropdown-item" value="2" selected>Last Day</option>
                <option class="dropdown-item" value="3">Last 2 Days</option>
                <option class="dropdown-item" value="4">Last 3 Days</option>
                <option class="dropdown-item" value="5">Last 4 Days</option>
                <option class="dropdown-item" value="6">Last 5 Days</option>
                <option class="dropdown-item" value="7">Last 6 Days</option>
                <option class="dropdown-item" value="8">Last Week</option>
            </select>
            <input class="form-control mr-sm-2" type="searchLocation" name="searchLocation"
                placeholder="Location (optional)" aria-label="SearchLocation" value="{{ request.form.searchLocation }}">
            <input class="form-control mr-sm-2" type="searchDisaster" name="searchDisaster" placeholder="Disaster"
                aria-label="SearchDisaster" value="{{ request.form.searchDisaster }}" required>
            <button onclick="loadingFunction()" onsubmit="doneFunction()" class="btn btn-outline-success my-2 my-sm-0"
                type="submit" action='/' method='POST'>Search</button>
        </form>
    </div>
</nav>

{% if tweetTitle %}
<br><br><br><br>
<h2><b>{{ tweetTitle }}</b></h2>
{% endif %}
<div style="overflow-y: scroll; height:300px; border-radius: 10px; padding: 30px;">
    {% for tweet in all_tweets %}
        <div style = "color: white; background-color: #007bff; border-radius: 10px; padding: 30px;">
            <p style="white-space:pre-wrap">Date: {{ tweet.date_created }}</p>
            {% if tweet.location %}
                <p style="white-space:pre-wrap">Location: {{ tweet.location }}</p>
            {% endif %}
            <p style="white-space:pre-wrap" font='bold'>{{ tweet.text }}</p>
        </div>
        <br>
    {% endfor %}
</div>

<div class="d-flex justify-content-center">
    <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status" id="loading">
        <span class="sr-only">Loading...</span>
    </div>
</div>

{% endblock %}